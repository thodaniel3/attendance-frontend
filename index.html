<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Attendance App</title>
<meta name="viewport" content="width=device-width,initial-scale=1">

<!-- html5-qrcode for built-in scanning -->
<script src="https://unpkg.com/html5-qrcode@2.3.9/minified/html5-qrcode.min.js"></script>

<style>
body { font-family: Arial,sans-serif; background:#000; color:#f5f5f5; margin:0; padding:0; }
h1,h2,h3 { text-align:center; margin-top:20px; color:#d4af37; font-weight:bold; }
.container { max-width:900px; margin:0 auto; padding:20px; }
section { background:#111; padding:20px; border-radius:10px; margin-bottom:25px; border:1px solid #333; box-shadow:0 0 10px rgba(212,175,55,0.15); }
input,button,select { width:100%; padding:12px; margin-top:10px; margin-bottom:10px; border-radius:6px; border:none; font-size:16px; }
input { background:#222; color:#ddd; border:1px solid #444; }
button { background:#5c3a23; color:white; cursor:pointer; font-weight:bold; transition:0.3s ease; }
button:hover { background:#7a4d2d; }
#student-panel img,#profile-photo,#profile-qr { border-radius:10px; margin-top:10px; border:2px solid #333; }
#regResult,#scanResult { margin-top:12px; padding:10px; background:#222; border-radius:6px; border:1px solid #333; }
.scan-area { display:flex; gap:12px; align-items:flex-start; flex-wrap:wrap; }
#reader { width:320px; max-width:100%; background:#000; border-radius:8px; padding:6px; border:1px solid #333; }
.scanner-controls { flex:1; min-width:220px; }
.small { font-size:13px; color:#ccc; }
</style>
</head>
<body>

<h1>Attendance Management System</h1>
<div class="container">

  <!-- Registration -->
  <section id="register">
    <h2>Student Registration</h2>
    <form id="regForm" enctype="multipart/form-data">
      <input name="name" placeholder="Full Name" required>
      <input name="username" placeholder="Username" required>
      <input name="email" type="email" placeholder="Email" required>
      <input name="matric_number" placeholder="Matric Number" required>
      <label>Upload Passport Photograph:</label>
      <input id="photo" name="photo" type="file" accept="image/*" required>
      <button type="submit">Register & Download QR</button>
    </form>
    <div id="regResult"></div>

    <div id="student-panel" style="display:none;">
      <h3>Student Profile</h3>
      <img id="profile-photo" style="max-width:150px;">
      <div>Name: <span id="profile-name"></span></div>
      <div>Matric: <span id="profile-matric"></span></div>
      <div>Email: <span id="profile-email"></span></div>
      <h3>QR Code</h3>
      <img id="profile-qr" style="max-width:200px;">
      <p class="small">The QR contains a link that opens the Scan page. Lecturers can use an external QR app or the built-in scanner.</p>
    </div>
  </section>

  <!-- Scanner section -->
  <section id="scanner">
    <h2>Lecturer Scanner (Built-in)</h2>
    <div class="scan-area">
      <div id="reader"></div>
      <div class="scanner-controls">
        <p class="small">Click <strong>Start Scanner</strong> to use the device camera. When a student's QR is detected the app will extract the student id and prompt for the lecturer PIN to mark attendance.</p>
        <button id="startScanner">Start Scanner</button>
        <button id="stopScanner" style="display:none;background:#444">Stop Scanner</button>
        <div id="scanResult"></div>
        <hr/>
        <p class="small">Or paste a Scan URL (from QR) here:</p>
        <input id="pasteUrl" placeholder="https://.../scan?id=..." />
        <button id="openUrl">Open Scan URL</button>
      </div>
    </div>
  </section>

</div>

<script src="intels.js"></script>
</body>
</html>
